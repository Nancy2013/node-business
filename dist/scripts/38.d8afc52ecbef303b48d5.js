webpackJsonp([38],{1268:function(t,a,e){"use strict";var n=(e(34),e(32)),s=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},i=n.a.maintainManageAsk,l=n.a.locationManageAsk;a.a={name:"MaintainDetail",components:{},mixins:[],props:{},data:function(){return{id:this.$route.params.id,form:this.$form.createForm(this),breadcrumbRoutes:[],spinning:!1,maintainInfos:[],labelCol:{span:2},wrapperCol:{span:20},cycleList:[{text:"1个月",value:1},{text:"3个月",value:3},{text:"6个月",value:6},{text:"12个月",value:12}],cyclevalue:this.$route.params.checkcycle,statusvalue:"",defaultStatus:""}},computed:{wType:function(){return function(){var t=this.statusvalue;return t&&"1"==t?"primary":null}},aType:function(){return function(){var t=this.statusvalue;return t&&"0"==t?"primary":null}}},watch:{},created:function(){this.setBreadcrumb(),this.id&&this.getSite()},mounted:function(){},destroyed:function(){},methods:{setBreadcrumb:function(){this.breadcrumbRoutes=[{name:"维护管理",breadcrumbName:"维护列表"},{name:"",breadcrumbName:"站点维护详情"}]},wClick:function(){if("0"==this.defaultStatus)return void this.$message.warning("已维护状态不可更改为待维护状态！");this.statusvalue="1"},aClick:function(){this.statusvalue="0"},cancel:function(){this.$router.back()},ok:function(){this.modSiteDetails()},modSiteDetails:function(){var t=this;this.spinning=!0;var a=(this.id,this.cyclevalue),e=this.statusvalue,n=s({},this.maintainInfos,{checkcycle:a,status:""+e});i.modSiteDetails(n).then(function(a){200===a.errcode&&(t.$message.success("操作成功！"),t.$router.push({name:"maintainList"})),t.spinning=!1}).catch(function(a){t.spinning=!1})},getSite:function(){var t=this;this.spinning=!0;var a=this.id;l.getSiteDetail({id:a}).then(function(a){var e=a.errcode,n=a.data,s=void 0===n?{}:n;if(200===e){var i=s.sites;t.maintainInfos=i||{};var l=t.maintainInfos,r=l.lastcheck,c=l.status;t.maintainInfos.lastcheck=r?t.$moment(r).format(t.GLOBAL.TIME_FOEMAT):"",t.statusvalue=c?""+c:"",t.defaultStatus=t.statusvalue}t.spinning=!1}).catch(function(a){t.spinning=!1})}}}},1686:function(t,a){},1687:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-spin",{attrs:{spinning:t.spinning}},[e("div",[e("div",{staticClass:"header-panel"},[e("bl-header",[e("bl-breadcrumb",{attrs:{slot:"left","breadcrumb-routes":t.breadcrumbRoutes},slot:"left"})],1)],1),t._v(" "),e("bl-page-wrapper",[e("div",{staticClass:"pl20",attrs:{slot:"content"},slot:"content"},[e("a-form",{staticClass:"reset-form-item-10 reset-form-item-label"},[e("a-form-item",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol,colon:!1,label:"站点名称"}},[e("span",[t._v(t._s(t.maintainInfos.location))])]),t._v(" "),e("a-form-item",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol,colon:!1,label:"上次维护"}},[e("span",[t._v(t._s(t.maintainInfos.lastcheck))])]),t._v(" "),e("a-form-item",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol,colon:!1,label:"维护周期"}},[e("a-select",{staticClass:"component-w-224",model:{value:t.cyclevalue,callback:function(a){t.cyclevalue=a},expression:"cyclevalue"}},t._l(t.cycleList,function(a){return e("a-select-option",{key:a.value,attrs:{value:a.value}},[t._v("\n                "+t._s(a.text)+"\n              ")])}),1)],1),t._v(" "),e("a-form-item",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol,colon:!1,label:"当前状态"}},[e("a-button",{staticClass:"mr10",staticStyle:{width:"88px"},attrs:{type:t.wType()},on:{click:t.wClick}},[t._v("待维护")]),t._v(" "),e("a-button",{staticClass:"mr10",staticStyle:{width:"88px"},attrs:{type:t.aType()},on:{click:t.aClick}},[t._v("已维护")])],1),t._v(" "),e("a-form-item",{attrs:{"label-col":{span:0},"wrapper-col":{span:24},colon:!1,label:""}},[e("a-button",{staticClass:"mr10",on:{click:t.cancel}},[t._v("取消")]),t._v(" "),e("a-button",{staticClass:"mr10",attrs:{type:"primary"},on:{click:t.ok}},[t._v("保存\n            ")])],1)],1)],1)])],1)])},s=[],i={render:n,staticRenderFns:s};a.a=i},984:function(t,a,e){"use strict";function n(t){e(1686)}Object.defineProperty(a,"__esModule",{value:!0});var s=e(1268),i=e(1687),l=e(24),r=n,c=l(s.a,i.a,!1,r,"data-v-73552980",null);a.default=c.exports}});