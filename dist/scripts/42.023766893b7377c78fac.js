webpackJsonp([42],{1265:function(t,a,e){"use strict";var n=(e(34),e(32)),r=function(){function t(t,a){var e=[],n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(e.push(o.value),!a||e.length!==a);n=!0);}catch(t){r=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return e}return function(a,e){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return t(a,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},o=n.a.locationManageAsk;a.a={name:"StoreDetail",components:{},props:{},data:function(){return{data:{},spinning:!1,id:this.$route.params.id,form:this.$form.createForm(this),labelCol:{span:2},wrapperCol:{span:6},breadcrumbRoutes:[],provincial:"",urban:"",areas:"",defaultValue:void 0}},computed:{},watch:{},created:function(){this.init()},mounted:function(){},methods:{init:function(){this.setBreadcrumb();var t=this.id,a=this.data;t?this.getDetail():this.data=i({},a,{provincial:"北京市",urban:"市辖区",areas:"东城区"})},setBreadcrumb:function(){var t=[{name:"位置管理",breadcrumbName:"全部位置"}];this.id?this.breadcrumbRoutes=[].concat(t,[{name:"",breadcrumbName:"门店详情"}]):this.breadcrumbRoutes=[].concat(t,[{name:"",breadcrumbName:"添加门店"}])},updateLocation:function(t){var a=r(t,3),e=a[0],n=a[1],o=a[2];this.data=i({},this.data,{provincial:e,urban:n,areas:o})},cancel:function(){this.$router.back()},showDelModal:function(){var t=this;this.$confirm({title:"确定要删除门店？",content:"",okText:"确定",cancelText:"取消",onOk:function(){t.del()},onCancel:function(){}})},ok:function(){var t=this;this.form.validateFields(function(a,e){if(!a){var n=t.id,r=t.data,o=e.name,s=e.location;t.data=i({},r,{name:o,location:s}),n?t.mod():t.add()}})},add:function(){var t=this;this.spinning=!0;var a=i({},this.data);o.addStore(a).then(function(a){var e=a.errcode;a.data;200===e&&(t.$message.success("操作成功！"),t.$router.push({name:"storeList"}),t.spinning=!1)}).catch(function(a){t.spinning=!1})},mod:function(){var t=this;this.spinning=!0;var a=i({},this.data);o.modStore(a).then(function(a){var e=a.errcode;a.data;200===e&&(t.$message.success("操作成功！"),t.$router.push({name:"storeList"}),t.spinning=!1)}).catch(function(a){t.spinning=!1})},del:function(){var t=this,a=this.id;o.delStore({storeids:[a]}).then(function(a){var e=a.errcode;a.data;200===e&&(t.$message.success("操作成功！"),t.$router.push({name:"storeList"}))}).catch(function(t){})},getDetail:function(){var t=this;this.spinning=!0;var a=this.id;o.getStoreDetail({limit:1,offset:1,id:a}).then(function(a){var e=a.errcode,n=a.data,r=void 0===n?{}:n;if(200===e){var i=r.stores,o=void 0===i?[]:i;t.data=o||{};var s=t.data,c=s.provincial,l=void 0===c?"北京市":c,u=s.urban,d=void 0===u?"市辖区":u,m=s.areas,p=void 0===m?"东城区":m;t.defaultValue=[l,d,p]}t.spinning=!1}).catch(function(a){t.spinning=!1})}}}},1680:function(t,a){},1681:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-spin",{attrs:{spinning:t.spinning}},[e("div",[e("bl-header",[e("bl-breadcrumb",{attrs:{slot:"left","breadcrumb-routes":t.breadcrumbRoutes},slot:"left"})],1),t._v(" "),e("bl-page-wrapper",{staticClass:"content-padding"},[e("div",{attrs:{slot:"content"},slot:"content"},[e("a-form",{staticClass:"reset-line-height",staticStyle:{width:"800px"},attrs:{form:t.form,"hide-required-mark":""}},[e("a-form-item",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol,colon:!1,label:"门店名称"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:t.data.name,rules:[{required:!0,message:"输入门店名称长度不超过20个字符",max:t.GLOBAL.NAME_MAX_LEN}]}],expression:"[ `name`,{\n        initialValue:data.name,\n        rules: [{ required: true, message: '输入门店名称长度不超过20个字符' ,max:GLOBAL.NAME_MAX_LEN}],} ]"}]})],1),t._v(" "),e("a-form-item",{attrs:{"label-col":t.labelCol,"wrapper-col":{span:20},colon:!1,label:"门店位置"}},[e("bl-cascader",{staticStyle:{"margin-right":"10px"},attrs:{"default-value":t.defaultValue},on:{update:t.updateLocation}}),t._v(" "),e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["location",{initialValue:t.data.location,rules:[{required:!0,message:"输入详细门店位置"}]}],expression:"[ `location`,{\n        initialValue:data.location,\n        rules: [{ required: true, message: '输入详细门店位置' }],} ]"}],staticClass:"component-w-224",attrs:{placeholder:"详细地址：如道路门牌"}})],1),t._v(" "),e("a-form-item",{staticStyle:{"margin-top":"100px"},attrs:{"label-col":{span:0},"wrapper-col":{span:24},colon:!1,label:""}},[e("a-button",{staticClass:"mr10",on:{click:t.cancel}},[t._v("取消")]),t._v(" "),t.id?e("a-button",{staticClass:"mr10",attrs:{type:"danger"},on:{click:t.showDelModal}},[t._v("删除")]):t._e(),t._v(" "),e("a-button",{staticClass:"mr10",attrs:{type:"primary"},on:{click:t.ok}},[t._v("确定\n            ")])],1)],1)],1)])],1)])},r=[],i={render:n,staticRenderFns:r};a.a=i},981:function(t,a,e){"use strict";function n(t){e(1680)}Object.defineProperty(a,"__esModule",{value:!0});var r=e(1265),i=e(1681),o=e(24),s=n,c=o(r.a,i.a,!1,s,"data-v-54c86bfe",null);a.default=c.exports}});