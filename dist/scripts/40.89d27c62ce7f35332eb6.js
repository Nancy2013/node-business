webpackJsonp([40],{1002:function(a,e,t){"use strict";function s(a){t(1753)}Object.defineProperty(e,"__esModule",{value:!0});var o=t(1292),r=t(1754),n=t(24),i=s,c=n(o.a,r.a,!1,i,"data-v-445473a3",null);e.default=c.exports},1292:function(a,e,t){"use strict";var s=t(435),o=t(34),r=t(32),n=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(a[s]=t[s])}return a},i=r.a.appAsk;e.a={name:"AccountSet",components:{Topbar:s.a},props:{},data:function(){return{isUserModal:!1,isPSDModal:!1,isError:!1,formName:this.$form.createForm(this),formPwd:this.$form.createForm(this),formRules:{displayname:["displayname",{rules:[{required:!0,message:"请输入用户名长度不超过20个字符",max:20}]}],accountpwd:["accountpwd",{initialValue:"",rules:[{required:!0,message:"请输入原登录密码"}]}],newAccountpwd:["newAccountpwd",{initialValue:"",rules:[{required:!0,message:"请输入新密码不少于6个字符",min:6,max:20}]}]}}},computed:n({},Object(o.mapState)("app",["userInfo","projectInfo"])),watch:{},created:function(){},mounted:function(){},methods:n({},Object(o.mapMutations)("app",["setUserInfo"]),{goBack:function(){this.$router.go(-1)},editName:function(){var a=this,e=this.userInfo.displayname;this.isUserModal=!0,this.$nextTick(function(){a.formName.setFieldsValue({displayname:e})})},setNameOk:function(){var a=this;this.formName.validateFields(function(e,t){if(!e){var s=t.displayname,o=a.userInfo.id;i.modAccount({id:o,displayname:s}).then(function(e){var t=e.errcode;e.data;if(200===t){a.$message.success("修改成功！");var o=n({},a.userInfo,{displayname:s});a.setUserInfo(o),localStorage.setItem("userInfoB_"+a.projectInfo.id,JSON.stringify(o)),a.isUserModal=!1}}).catch(function(a){})}})},focus:function(){this.isError=!1},editPSD:function(){this.isPSDModal=!0},setPSDOk:function(){var a=this;this.formPwd.validateFields(function(e,t){if(!e){var s=a.projectInfo.id,o=JSON.parse(localStorage["userInfoB_"+s]||"{}"),r=o.accountpwd,c=t.accountpwd,l=t.newAccountpwd;if(r!==a.$md5(c))return void(a.isError=!0);var d={id:a.userInfo.id,accountpwd:a.$md5(l)};i.modAccount(d).then(function(e){var t=e.errcode;e.data;if(200===t){a.$message.success("修改成功！");var o=n({},a.userInfo,{accountpwd:a.$md5(l)});a.setUserInfo(o),localStorage.setItem("userInfoB_"+s,JSON.stringify(o)),a.isPSDModal=!1}}).catch(function(a){})}})}})}},1753:function(a,e){},1754:function(a,e,t){"use strict";var s=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("Topbar"),a._v(" "),t("div",{staticClass:"reset-container"},[t("div",{staticClass:"header-panel"},[t("bl-header",[t("span",{staticClass:"cursor",attrs:{slot:"left"},on:{click:a.goBack},slot:"left"},[t("a-icon",{staticClass:"mr10",attrs:{type:"arrow-left"}}),a._v("账号设置")],1)])],1),a._v(" "),t("bl-page-wrapper",[t("div",{attrs:{slot:"content"},slot:"content"},[t("div",{staticClass:"reset-panel"},[t("div",[t("div",{staticClass:"form-panel"},[t("div",{staticClass:"form-content"},[t("a-form",{attrs:{"hide-required-mark":""}},[t("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:16},colon:!1,label:"账号"}},[t("a-input",{attrs:{disabled:""},model:{value:a.userInfo.accountname,callback:function(e){a.$set(a.userInfo,"accountname",e)},expression:"userInfo.accountname"}})],1),a._v(" "),t("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:16},colon:!1,label:"用户名"}},[t("a-row",{attrs:{gutter:10}},[t("a-col",{attrs:{span:18}},[t("a-input",{attrs:{disabled:""},model:{value:a.userInfo.displayname,callback:function(e){a.$set(a.userInfo,"displayname",e)},expression:"userInfo.displayname"}})],1),a._v(" "),t("a-col",{attrs:{span:6}},[t("a-button",{attrs:{type:"primary",block:""},on:{click:a.editName}},[a._v("编辑")])],1)],1)],1),a._v(" "),t("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:16},colon:!1,label:"密码"}},[t("a-row",{attrs:{gutter:10}},[t("a-col",{attrs:{span:18}},[t("a-input",{attrs:{placeholder:"*********",disabled:"",type:"password"}})],1),a._v(" "),t("a-col",{attrs:{span:6}},[t("a-button",{attrs:{type:"primary",block:""},on:{click:a.editPSD}},[a._v("编辑")])],1)],1)],1)],1)],1)])])])])])],1),a._v(" "),t("a-modal",{attrs:{"mask-closable":!1,width:400,closable:!1,title:"修改用户名","ok-text":"确定","cancel-text":"取消"},on:{ok:a.setNameOk},model:{value:a.isUserModal,callback:function(e){a.isUserModal=e},expression:"isUserModal"}},[t("a-form",{attrs:{form:a.formName,"hide-required-mark":""}},[t("a-form-item",{attrs:{"label-col":{span:0},"wrapper-col":{span:24},colon:!1,label:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:a.formRules.displayname,expression:"formRules.displayname"}],attrs:{placeholder:"请输入用户名"}})],1)],1)],1),a._v(" "),a.isPSDModal?t("a-modal",{attrs:{"mask-closable":!1,width:400,closable:!1,title:"修改密码","ok-text":"确定","cancel-text":"取消"},on:{ok:a.setPSDOk},model:{value:a.isPSDModal,callback:function(e){a.isPSDModal=e},expression:"isPSDModal"}},[t("a-form",{staticClass:"reset-form-item",attrs:{form:a.formPwd,"hide-required-mark":""}},[t("a-form-item",{attrs:{"label-col":{span:0},"wrapper-col":{span:24},colon:!1,label:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:a.formRules.accountpwd,expression:"formRules.accountpwd"}],staticStyle:{"margin-bottom":"10px"},attrs:{type:"password",placeholder:"请输入原登录密码"},on:{focus:a.focus}})],1),a._v(" "),t("a-form-item",{attrs:{"label-col":{span:0},"wrapper-col":{span:24},colon:!1,label:""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:a.formRules.newAccountpwd,expression:"formRules.newAccountpwd"}],staticStyle:{"margin-bottom":"10px"},attrs:{type:"password",placeholder:"请输入新密码"}})],1),a._v(" "),a.isError?t("span",{staticClass:"error-tips"},[a._v("原密码输入错误，请重新输入")]):a._e()],1)],1):a._e()],1)},o=[],r={render:s,staticRenderFns:o};e.a=r}});