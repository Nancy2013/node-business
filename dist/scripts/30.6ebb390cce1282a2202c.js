webpackJsonp([30],{1258:function(t,e,a){"use strict";var n=a(34),r=a(32),i=a(1664),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};r.a.locationManageAsk;e.a={name:"LocationList",components:{DistrictSelect:i.a},props:{},data:function(){return{breadcrumbRoutes:[{name:"位置管理",breadcrumbName:"全部位置"}],search:"",defaultActiveKey:this.$route.name}},computed:{formatAdd:function(){return"添加"+("siteList"===this.$route.name?"站点":"门店")}},watch:{},created:function(){},mounted:function(){},methods:c({},Object(n.mapMutations)("locationManage",["updateLocation","updateSearch"]),{handleDistrictChange:function(){this.doSearch()},getSearch:function(){var t=this.search;this.updateSearch(t)},doSearch:function(){var t=this.$route.name;this.$refs[t].doSearch()},add:function(){var t=this.$route.name;this.$router.push({name:t.replace("List","Add")})},changeTab:function(t){var e=this.$refs.districtSelect;this.defaultActiveKey=t,e.init(),this.search="",this.updateSearch(this.search),this.$router.push({name:t})}})}},1259:function(t,e,a){"use strict";function n(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){function n(r,i){try{var c=e[r](i),o=c.value}catch(t){return void a(t)}if(!c.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}return n("next")})}}var r=a(34),i=a(32),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},o=i.a.locationManageAsk;e.a={name:"DistrictSelect",components:{},mixins:[],props:{},data:function(){return{provinceData:[],cityData:[],districtData:[],provincial:"-1",urban:"-1",areas:"-1"}},computed:c({},Object(r.mapState)("app",["projectInfo"]),{name:function(){var t=this.$route.name;return"siteList"===t||"maintainList"===t?"site":"store"}}),watch:{$route:function(){this.getProvincial()}},created:function(){this.init(),this.getProvincial()},mounted:function(){},destroyed:function(){},methods:c({},Object(r.mapMutations)("locationManage",["updateLocation"]),{init:function(){this.provincial="-1",this.urban="-1",this.areas="-1",this.provinceData=[],this.cityData=[],this.districtData=[];var t=this.provincial,e=this.urban,a=this.areas;this.updateLocation([t,e,a])},handleProvinceChange:function(){var t=this;return n(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("-1"!==(a=t.provincial)){e.next=6;break}t.cityData=[],t.urban="-1",e.next=10;break;case 6:return e.next=8,t.getUrban();case 8:return e.next=10,t.getArea();case 10:t.handleCityChange();case 11:case"end":return e.stop()}},e,t)}))()},handleCityChange:function(){var t=this;return n(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("-1"!==(a=t.urban)){e.next=6;break}t.districtData=[],t.areas="-1",e.next=8;break;case 6:return e.next=8,t.getArea();case 8:t.handleDistrictChange();case 9:case"end":return e.stop()}},e,t)}))()},handleDistrictChange:function(){var t=this.provincial,e=this.urban,a=this.areas,n=this.getLocationName,r=this.provinceData,i=this.cityData,c=this.districtData,o=[n(r,t),n(i,e),n(c,a)];this.updateLocation(o),this.$emit("change")},getLocationName:function(t,e){var a=t&&t.find(function(t){return t._id===e});return a?a.name:""},getProvincial:function(){var t=this,e=this.name;this.projectInfo;o[e+"GetProvincial"]({}).then(function(e){var a=e.errcode,n=e.data,r=void 0===n?{}:n;if(200===a){var i=r.provincials,c=void 0===i?[]:i;t.provinceData=c}}).catch(function(t){})},getUrban:function(){var t=this;return n(regeneratorRuntime.mark(function e(){var a,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.urban="-1",a=t.provincial,n=t.name,r={parentId:a},e.next=5,o[n+"GetUrban"](r).then(function(e){var a=e.errcode,n=e.data,r=void 0===n?{}:n;if(200===a){var i=r.urbans,c=void 0===i?[]:i;t.cityData=c}}).catch(function(t){});case 5:case"end":return e.stop()}},e,t)}))()},getArea:function(){var t=this;return n(regeneratorRuntime.mark(function e(){var a,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.areas="-1",a=t.provincial,n=t.urban,r=t.name,i={parentId:n},e.next=5,o[r+"GetArea"](i).then(function(e){var a=e.errcode,n=e.data,r=void 0===n?{}:n;if(200===a){var i=r.areas,c=void 0===i?[]:i;t.districtData=c}}).catch(function(t){});case 5:case"end":return e.stop()}},e,t)}))()}})}},1663:function(t,e){},1664:function(t,e,a){"use strict";function n(t){a(1665)}var r=a(1259),i=a(1666),c=a(24),o=n,s=c(r.a,i.a,!1,o,"data-v-5161c59c",null);e.a=s.exports},1665:function(t,e){},1666:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"district-select"},[a("a-select",{staticClass:"component-w-120",on:{change:t.handleProvinceChange},model:{value:t.provincial,callback:function(e){t.provincial=e},expression:"provincial"}},[a("a-select-option",{attrs:{value:"-1"}},[t._v("\n      省\n    ")]),t._v(" "),t._l(t.provinceData,function(e){return a("a-select-option",{key:e.name,attrs:{value:e._id}},[t._v("\n      "+t._s(e.name)+"\n    ")])})],2),t._v(" "),a("a-select",{staticClass:"component-w-120",staticStyle:{margin:"0 10px"},on:{change:t.handleCityChange},model:{value:t.urban,callback:function(e){t.urban=e},expression:"urban"}},[a("a-select-option",{attrs:{value:"-1"}},[t._v("\n      市\n    ")]),t._v(" "),t._l(t.cityData,function(e){return a("a-select-option",{key:e.name,attrs:{value:e._id}},[t._v("\n      "+t._s(e.name)+"\n    ")])})],2),t._v(" "),a("a-select",{staticClass:"component-w-120",on:{change:t.handleDistrictChange},model:{value:t.areas,callback:function(e){t.areas=e},expression:"areas"}},[a("a-select-option",{attrs:{value:"-1"}},[t._v("\n      区\n    ")]),t._v(" "),t._l(t.districtData,function(e){return a("a-select-option",{key:e.name,attrs:{value:e._id}},[t._v("\n      "+t._s(e.name)+"\n    ")])})],2)],1)},r=[],i={render:n,staticRenderFns:r};e.a=i},1667:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header-panel"},[a("bl-header",[a("bl-breadcrumb",{attrs:{slot:"left","breadcrumb-routes":t.breadcrumbRoutes},slot:"left"}),t._v(" "),a("div",{attrs:{slot:"right"},slot:"right"},[a("DistrictSelect",{ref:"districtSelect",attrs:{"route-name":"routeName"},on:{change:t.handleDistrictChange}}),t._v(" "),a("a-input-search",{staticClass:"component-w-224",staticStyle:{margin:"0 10px"},attrs:{placeholder:"输入名称搜索","enter-button":""},on:{change:t.getSearch,search:t.doSearch},model:{value:t.search,callback:function(e){t.search="string"==typeof e?e.trim():e},expression:"search"}}),t._v(" "),a("a-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v(t._s(t.formatAdd))])],1)],1)],1),t._v(" "),a("bl-page-wrapper",[a("div",{attrs:{slot:"content"},slot:"content"},[a("a-tabs",{attrs:{"default-active-key":t.defaultActiveKey},on:{change:t.changeTab}},[a("a-tab-pane",{key:"siteList",attrs:{tab:"站点列表"}}),t._v(" "),a("a-tab-pane",{key:"storeList",attrs:{tab:"门店列表","force-render":""}})],1),t._v(" "),a("router-view",{ref:t.defaultActiveKey,staticClass:"tab-panel"})],1)])],1)},r=[],i={render:n,staticRenderFns:r};e.a=i},976:function(t,e,a){"use strict";function n(t){a(1663)}Object.defineProperty(e,"__esModule",{value:!0});var r=a(1258),i=a(1667),c=a(24),o=n,s=c(r.a,i.a,!1,o,"data-v-61318a44",null);e.default=s.exports}});