webpackJsonp([31],{1001:function(t,e,a){"use strict";function o(t){a(1750)}Object.defineProperty(e,"__esModule",{value:!0});var r=a(1291),s=a(1752),n=a(24),i=o,c=n(r.a,s.a,!1,i,"data-v-3a888ec7",null);e.default=c.exports},1291:function(t,e,a){"use strict";var o=a(32),r=a(34),s=a(437),n=a.n(s),i=a(1751),c=a.n(i),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},p=o.a.appAsk;e.a={name:"Login",components:{},props:{},data:function(){return{isError:!1,form:this.$form.createForm(this),formRules:{accountName:["accountname",{rules:[{required:!0,message:"请输入用户名"}]}],password:["password",{rules:[{required:!0,message:"请输入密码"}]}]},logo:n.a,loginBg:c.a}},computed:l({},Object(r.mapState)("app",["userInfo","projectInfo"]),{minHeight:function(){return this.$store.state.app.window.height},styleObject:function(){return{minHeight:this.minHeight+"px",backgroundImage:"url("+(this.projectInfo.loginuiurl||c.a)+")"}}}),watch:{},created:function(){},mounted:function(){},methods:l({},Object(r.mapMutations)("app",["setUserInfo"]),{focus:function(){this.isError=!1},login:function(){var t=this;this.form.validateFields(function(e,a){if(!e){var o=a.accountname,r=a.password,s={accountname:o,password:t.$md5(r),pid:""+t.projectInfo.id};p.loginAccount(s).then(function(e){var a=e.errcode,o=e.data;if(200===a){var s=o.accountinfo,n=o.token,i={token:n,expired:new Date},c=t.projectInfo.id;localStorage.setItem("authB_"+c,JSON.stringify(i)),localStorage.setItem("userInfoB_"+c,JSON.stringify(l({},s,{accountpwd:t.$md5(r)}))),t.setUserInfo(s),setTimeout(function(){t.$router.push({path:"/home"})},500)}}).catch(function(e){403===e.errcode&&(t.isError=!0)})}})}})}},1750:function(t,e){},1751:function(t,e,a){t.exports=a.p+"static/img/body_bg.4deba1f.jpg"},1752:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login",style:t.styleObject},[a("div",{staticClass:"center"},[a("div",{staticClass:"header"},[a("div",{staticClass:"title-panel"},[a("div",{staticClass:"title"},[t._v("\n          "+t._s(t.projectInfo.projectname)+"\n        ")])])]),t._v(" "),a("div",{staticClass:"form-panel"},[a("div",{staticClass:"form-content mt30"},[a("a-form",{staticClass:"reset-form-item",attrs:{form:t.form,"hide-required-mark":""}},[a("a-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{"label-col":{span:0},"wrapper-col":{span:24},colon:!1,label:""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:t.formRules.accountName,expression:"formRules.accountName"}],staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"账号"},on:{focus:t.focus}},[a("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),t._v(" "),a("a-form-item",{attrs:{"label-col":{span:0},"wrapper-col":{span:24},colon:!1,label:""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:t.formRules.password,expression:"formRules.password"}],staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"密码",type:"password"},on:{focus:t.focus}},[a("span",{staticClass:"iconfont iconsuo",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),t.isError?a("span",{staticClass:"error-tips"},[t._v("账号或密码错误，请重新输入")]):t._e(),t._v(" "),a("a-form-item",{attrs:{"label-col":{span:0},"wrapper-col":{span:24},colon:!1,label:""}},[a("a-button",{staticClass:"bottom-btn mt20",attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)],1)],1)])])])},r=[],s={render:o,staticRenderFns:r};e.a=s}});